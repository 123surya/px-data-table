<!doctype html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>px-data-table Demo</title>
    <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->
    <script src="../webcomponentsjs/webcomponents-lite.min.js"></script>
    <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->

    <script src="pxDataTableBehaviorsDemo.js"></script>

    <link rel="import" href="px-data-table.html" />
    <link rel="import" href="../iron-ajax/iron-ajax.html" />
    <link rel="import" href="../px-theme/px-theme.html"/>
  </head>

  <body unresolved>
    <template is="dom-bind">
      <iron-ajax url="contacts.json" last-response="{{data}}" auto></iron-ajax>
      <iron-ajax url="contacts-mini.json" last-response="{{minidata}}" auto></iron-ajax>

      <h3>Data table demos</h3>

      <p>A very simple data table.  Just displays data and has sortable columns.</p>
      <px-data-table table-data="{{minidata}}"></px-data-table>

      <hr>

      <p>Filterable columns and selectable rows.</p>
      <px-data-table filterable selectable table-data="{{data}}"></px-data-table>

      <hr>

      <p>Display as columns instead of a grid.</p>
      <px-data-table table-columns table-data="{{data}}"></px-data-table>

      <hr>

      <p>Display as rows instead of a grid.</p>
      <px-data-table table-rows table-data="{{data}}"></px-data-table>

      <p>Very customized data table, with:</p>
      <ul>
        <li>Filter - only first and third columns</li>
        <li>Custom filtering functions - on an entire word in the first column and on the button text in the third column</li>
        <li>Sorting - only first and second columns</li>
        <li>Custom sorting functions - on the first column</li>
        <li>Html rendering - in the third column</li>
        <li>Ellipsis - in fourth column</li>
        <li>Interacting with the selected rows... there are <span>{{mySelectedRows.length}}</span> rows selected</li>
        <li>... and you can <button onclick="logSelectedRows()">console.log the selected rows</button></li>
        <li>... and you can receive px-row-click events from the table, which can be used by taking action on the row</li>
      </ul>
      <px-data-table id="mytable" selected-rows="{{mySelectedRows}}" filterable selectable striped table-data="{{minidata}}">
        <px-data-table-column
          name="first"
          searchable
          sortable
          filter-function-name="filterWholeWord"
          sort-function-name="sortColumn">
        </px-data-table-column>
        <px-data-table-column
          name="last"
          sortable>
        </px-data-table-column>
        <px-data-table-column
          name="color"
    			type="html"
          searchable
          filter-function-name="filterMarkupVal">
        </px-data-table-column>
    		<px-data-table-column
          name="date"
          max-column-character-width="30"
          ellipsis-clip-position="right">
        </px-data-table-column>
      </px-data-table>

      <script>

        function logSelectedRows() {
          var selectedRows = document.getElementById("mytable").selectedRows;
          console.log("Get all selected rows:", selectedRows);
        }

        document.getElementById("mytable").addEventListener("px-row-click", function(e) {
          var clickedRow = e.detail.row;
          console.log("Row clicked", clickedRow, " _selected: ", clickedRow._selected);
        });

      </script>

    </template>
  </body>

</html>
